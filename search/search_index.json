{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"n8n Horizontal Scaling on DigitalOcean","text":"<p>Welcome to the documentation for deploying n8n with horizontal scaling on DigitalOcean.</p> <p>This Terraform configuration deploys a production-ready n8n setup with:</p> <ul> <li>\u2705 PostgreSQL database cluster - Managed database for n8n data</li> <li>\u2705 Valkey (Redis) database cluster - Queue backend for horizontal scaling</li> <li>\u2705 Main droplet - n8n coordinator/web UI</li> <li>\u2705 Worker droplets - Scalable n8n workers for execution</li> <li>\u2705 VPC - Secure private networking between resources</li> </ul>"},{"location":"#quick-navigation","title":"Quick Navigation","text":"<ul> <li>Quick Start Guide - Get up and running in minutes</li> <li>Architecture Overview - Understand the infrastructure</li> <li>Configuration - Customize your deployment</li> <li>Troubleshooting - Common issues and solutions</li> </ul>"},{"location":"#features","title":"Features","text":""},{"location":"#horizontal-scaling","title":"Horizontal Scaling","text":"<p>Scale your n8n workers independently based on workload. Add or remove worker droplets as needed.</p>"},{"location":"#high-availability","title":"High Availability","text":"<ul> <li>Managed database clusters with automatic backups</li> <li>Load balancer for the main instance</li> <li>Private networking for secure communication</li> </ul>"},{"location":"#docker-ready","title":"Docker Ready","text":"<p>All droplets use the <code>docker-20-04</code> marketplace image with Docker and Docker Compose pre-installed.</p>"},{"location":"#getting-started","title":"Getting Started","text":"<ol> <li>Check the Prerequisites</li> <li>Follow the Quick Start Guide</li> <li>Review the Configuration options</li> </ol> <p>For detailed information, see the sections in the navigation menu.</p>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>Common issues and solutions when deploying n8n with horizontal scaling on DigitalOcean.</p>"},{"location":"troubleshooting/#initialization-issues","title":"Initialization Issues","text":""},{"location":"troubleshooting/#viewing-initialization-logs","title":"Viewing Initialization Logs","text":"<p>All initialization scripts save their output to log files for troubleshooting.</p>"},{"location":"troubleshooting/#main-instance-logs","title":"Main Instance Logs","text":"<pre><code># SSH into main instance\nssh root@$(terraform output -raw main_public_ip)\n\n# View initialization logs\ncat /var/log/n8n-main-init.log\n\n# Follow logs in real-time (if still initializing)\ntail -f /var/log/n8n-main-init.log\n\n# View n8n container logs\ndocker logs n8n -f\n</code></pre>"},{"location":"troubleshooting/#worker-instance-logs","title":"Worker Instance Logs","text":"<pre><code># SSH into any worker\nssh root@&lt;worker-ip&gt;\n\n# View initialization logs\ncat /var/log/n8n-worker-init.log\n\n# Follow logs in real-time (if still initializing)\ntail -f /var/log/n8n-worker-init.log\n</code></pre>"},{"location":"troubleshooting/#what-the-logs-contain","title":"What the Logs Contain","text":"<ul> <li>Script start/completion timestamps</li> <li>Docker readiness checks</li> <li>Volume creation</li> <li>n8n container startup</li> <li>Database connection details (host/port only, not passwords)</li> <li>Health check results</li> <li>Any errors encountered during setup</li> </ul>"},{"location":"troubleshooting/#common-issues","title":"Common Issues","text":""},{"location":"troubleshooting/#database-connection-failures","title":"Database Connection Failures","text":"<p>Symptoms: - n8n fails to start - Connection timeout errors in logs - \"SSL required\" errors</p> <p>Solutions:</p> <ol> <li> <p>Check database is ready: <pre><code># Databases take 10-15 minutes to provision\nterraform output database_host\n</code></pre></p> </li> <li> <p>Verify SSL configuration:</p> </li> <li>Ensure <code>DB_POSTGRESDB_SSL_ENABLED=true</code> is set</li> <li> <p>Check <code>SSL_REJECT_UNAUTHORIZED=false</code> for DigitalOcean certificates</p> </li> <li> <p>Check VPC connectivity:</p> </li> <li>Verify all resources are in the same VPC</li> <li>Check firewall rules allow database access</li> </ol>"},{"location":"troubleshooting/#queue-connection-issues","title":"Queue Connection Issues","text":"<p>Symptoms: - Workers not processing jobs - \"Redis connection failed\" errors</p> <p>Solutions:</p> <ol> <li> <p>Verify Valkey is ready: <pre><code>terraform output valkey_host\n</code></pre></p> </li> <li> <p>Check TLS configuration:</p> </li> <li>Ensure <code>QUEUE_BULL_REDIS_TLS=true</code> is set</li> <li> <p>Verify TLS certificate settings</p> </li> <li> <p>Test Redis connection from worker: <pre><code>ssh root@&lt;worker-ip&gt;\ndocker exec n8n env | grep REDIS\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#encryption-key-mismatch","title":"Encryption Key Mismatch","text":"<p>Symptoms: - Workers can't decrypt data - \"Decryption failed\" errors</p> <p>Solutions:</p> <ol> <li> <p>Verify all instances use the same key: <pre><code>terraform output -raw n8n_encryption_key\n</code></pre></p> </li> <li> <p>Check environment variables: <pre><code>ssh root@$(terraform output -raw main_public_ip)\ndocker exec n8n env | grep N8N_ENCRYPTION_KEY\n</code></pre></p> </li> <li> <p>Ensure key is 32 hex characters:</p> </li> <li>Auto-generated keys are correct</li> <li>Manual keys must be exactly 32 hex characters</li> </ol>"},{"location":"troubleshooting/#docker-not-available","title":"Docker Not Available","text":"<p>Symptoms: - \"docker: command not found\" - Container startup failures</p> <p>Solutions:</p> <ol> <li>Verify Docker image:</li> <li>Ensure using <code>docker-20-04</code> or <code>docker-24-04</code> image</li> <li> <p>Or install Docker via cloud-init</p> </li> <li> <p>Check Docker service: <pre><code>ssh root@&lt;droplet-ip&gt;\nsystemctl status docker\ndocker --version\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#workers-not-processing-jobs","title":"Workers Not Processing Jobs","text":"<p>Symptoms: - Jobs stuck in queue - Workers idle</p> <p>Solutions:</p> <ol> <li> <p>Verify worker configuration: <pre><code>ssh root@&lt;worker-ip&gt;\ndocker exec n8n env | grep EXECUTIONS_MODE\n# Should be: EXECUTIONS_MODE=queue\n</code></pre></p> </li> <li> <p>Check queue connection:</p> </li> <li>Verify Valkey connection details</li> <li>Check TLS settings</li> <li> <p>Ensure workers can reach Valkey via VPC</p> </li> <li> <p>Verify worker mode: <pre><code>docker exec n8n env | grep N8N_DISABLE_PRODUCTION_MAIN_PROCESS\n# Should be: N8N_DISABLE_PRODUCTION_MAIN_PROCESS=true\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#verification-steps","title":"Verification Steps","text":""},{"location":"troubleshooting/#verify-deployment","title":"Verify Deployment","text":"<pre><code># Check all resources\nterraform show\n\n# Get connection details\nterraform output\n\n# Test main instance\ncurl http://$(terraform output -raw main_public_ip):5678\n</code></pre>"},{"location":"troubleshooting/#verify-database-connections","title":"Verify Database Connections","text":"<pre><code># SSH into main instance\nssh root@$(terraform output -raw main_public_ip)\n\n# Check PostgreSQL connection\ndocker exec n8n env | grep DB_POSTGRESDB\n\n# Check Valkey connection\ndocker exec n8n env | grep REDIS\n</code></pre>"},{"location":"troubleshooting/#verify-worker-status","title":"Verify Worker Status","text":"<pre><code># SSH into worker\nssh root@&lt;worker-ip&gt;\n\n# Check n8n container\ndocker ps | grep n8n\n\n# Check logs\ndocker logs n8n --tail 50\n</code></pre>"},{"location":"troubleshooting/#getting-help","title":"Getting Help","text":"<p>If you encounter issues not covered here:</p> <ol> <li>Check the n8n Documentation</li> <li>Review DigitalOcean Documentation</li> <li>Check Terraform DigitalOcean Provider Docs</li> <li>Review initialization logs (see above)</li> </ol>"},{"location":"troubleshooting/#cleanup","title":"Cleanup","text":"<p>If you need to start over:</p> <pre><code># Destroy all resources\nterraform destroy\n\n# Remove state files (if needed)\nrm terraform.tfstate terraform.tfstate.backup\n</code></pre>"},{"location":"architecture/infrastructure/","title":"Infrastructure Details","text":"<p>Detailed information about the infrastructure components.</p>"},{"location":"architecture/infrastructure/#droplets","title":"Droplets","text":""},{"location":"architecture/infrastructure/#main-droplet","title":"Main Droplet","text":"<ul> <li>Purpose: n8n coordinator/web UI</li> <li>Default Size: <code>s-1vcpu-2gb</code> (1 vCPU, 2GB RAM)</li> <li>Image: <code>docker-20-04</code> (Docker pre-installed)</li> <li>Public IP: Yes (for web UI access)</li> <li>Ports: 5678 (n8n web interface)</li> </ul>"},{"location":"architecture/infrastructure/#worker-droplets","title":"Worker Droplets","text":"<ul> <li>Purpose: Execute n8n workflows</li> <li>Default Count: 3</li> <li>Default Size: <code>s-1vcpu-1gb</code> (1 vCPU, 1GB RAM)</li> <li>Image: <code>docker-20-04</code> (Docker pre-installed)</li> <li>Public IP: Optional (can be private only)</li> </ul>"},{"location":"architecture/infrastructure/#databases","title":"Databases","text":""},{"location":"architecture/infrastructure/#postgresql","title":"PostgreSQL","text":"<ul> <li>Type: DigitalOcean Managed Database</li> <li>Default Size: <code>db-s-1vcpu-1gb</code></li> <li>Access: Private (VPC only)</li> <li>SSL: Required (enforced by DigitalOcean)</li> </ul>"},{"location":"architecture/infrastructure/#valkey-redis","title":"Valkey (Redis)","text":"<ul> <li>Type: DigitalOcean Managed Database</li> <li>Default Size: <code>db-s-1vcpu-1gb</code></li> <li>Access: Private (VPC only)</li> <li>TLS: Required (enforced by DigitalOcean)</li> </ul>"},{"location":"architecture/infrastructure/#networking","title":"Networking","text":""},{"location":"architecture/infrastructure/#vpc","title":"VPC","text":"<ul> <li>IP Range: <code>10.10.10.0/24</code> (configurable)</li> <li>Purpose: Secure private networking</li> <li>Benefits:</li> <li>All resources communicate privately</li> <li>Databases not exposed to public internet</li> <li>Encrypted traffic within VPC</li> </ul>"},{"location":"architecture/infrastructure/#available-images","title":"Available Images","text":"<p>Common DigitalOcean image slugs:</p> Image Slug Description <code>docker-20-04</code> Ubuntu 20.04 + Docker + Docker Compose \u2705 Recommended <code>ubuntu-22-04-x64</code> Ubuntu 22.04 LTS (plain) <code>ubuntu-24-04-x64</code> Ubuntu 24.04 LTS (plain) <code>docker-24-04</code> Ubuntu 24.04 + Docker + Docker Compose <p>You can list all available images:</p> <pre><code>doctl compute image list --public | grep -i docker\n</code></pre>"},{"location":"architecture/overview/","title":"Architecture Overview","text":"<p>This document describes the architecture of the n8n horizontal scaling deployment on DigitalOcean.</p>"},{"location":"architecture/overview/#high-level-architecture","title":"High-Level Architecture","text":"<p>All resources are deployed within a single DigitalOcean VPC for secure private networking:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           DigitalOcean VPC (10.10.10.0/24)          \u2502\n\u2502              Secure Private Network                  \u2502\n\u2502                                                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                \u2502\n\u2502  \u2502    n8n-main      \u2502  \u2190 Public IP + Private IP      \u2502\n\u2502  \u2502   (Coordinator)  \u2502    Docker + Docker Compose     \u2502\n\u2502  \u2502   Port: 5678     \u2502                                \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                \u2502\n\u2502            \u2502 (private network)                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                  \u2502\n\u2502  \u2502                                 \u2502                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u2502\n\u2502  \u2502Worker 1  \u2502  \u2502Worker 2  \u2502  \u2502Worker 3  \u2502           \u2502\n\u2502  \u2502(Private) \u2502  \u2502(Private) \u2502  \u2502(Private) \u2502           \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518           \u2502\n\u2502       \u2502             \u2502             \u2502                  \u2502\n\u2502       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                  \u2502\n\u2502                     \u2502 (private network)              \u2502\n\u2502          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                     \u2502\n\u2502          \u2502                     \u2502                     \u2502\n\u2502     \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510              \u2502\n\u2502     \u2502PostgreSQL \u2502       \u2502   Valkey   \u2502              \u2502\n\u2502     \u2502 (Private) \u2502       \u2502 (Private)  \u2502              \u2502\n\u2502     \u2502  Managed  \u2502       \u2502  Managed   \u2502              \u2502\n\u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2502\n\u2502                                                       \u2502\n\u2502  All communication within VPC is encrypted &amp; private \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/overview/#components","title":"Components","text":""},{"location":"architecture/overview/#main-droplet","title":"Main Droplet","text":"<ul> <li>Purpose: n8n coordinator/web UI</li> <li>Default Size: <code>s-1vcpu-2gb</code> (1 vCPU, 2GB RAM)</li> <li>Image: <code>docker-20-04</code> (Docker pre-installed)</li> <li>Public IP: Yes (for web UI access)</li> <li>Ports: 5678 (n8n web interface)</li> <li>Role: </li> <li>Serves the web UI</li> <li>Coordinates workflow execution</li> <li>Runs database migrations</li> <li>Manages the queue system</li> </ul>"},{"location":"architecture/overview/#worker-droplets","title":"Worker Droplets","text":"<ul> <li>Purpose: Execute n8n workflows</li> <li>Default Count: 3</li> <li>Default Size: <code>s-1vcpu-1gb</code> (1 vCPU, 1GB RAM)</li> <li>Image: <code>docker-20-04</code> (Docker pre-installed)</li> <li>Public IP: Optional (can be private only)</li> <li>Role:</li> <li>Pull jobs from the queue</li> <li>Execute workflows</li> <li>Report results back</li> </ul>"},{"location":"architecture/overview/#postgresql-database","title":"PostgreSQL Database","text":"<ul> <li>Purpose: Store workflows, credentials, execution history</li> <li>Type: DigitalOcean Managed Database</li> <li>Default Size: <code>db-s-1vcpu-1gb</code></li> <li>Access: Private (VPC only)</li> <li>SSL: Required (enforced by DigitalOcean)</li> </ul>"},{"location":"architecture/overview/#valkey-redis-database","title":"Valkey (Redis) Database","text":"<ul> <li>Purpose: Queue management, caching, session storage</li> <li>Type: DigitalOcean Managed Database</li> <li>Default Size: <code>db-s-1vcpu-1gb</code></li> <li>Access: Private (VPC only)</li> <li>TLS: Required (enforced by DigitalOcean)</li> </ul>"},{"location":"architecture/overview/#vpc-virtual-private-cloud","title":"VPC (Virtual Private Cloud)","text":"<ul> <li>Purpose: Secure private networking</li> <li>IP Range: <code>10.10.10.0/24</code> (configurable)</li> <li>Benefits:</li> <li>All resources communicate privately</li> <li>Databases not exposed to public internet</li> <li>Encrypted traffic within VPC</li> </ul>"},{"location":"architecture/overview/#network-security","title":"Network Security","text":"<ul> <li>\u2705 VPC Isolation: All resources in a single private network</li> <li>\u2705 Private Database Access: PostgreSQL &amp; Valkey only accessible within VPC</li> <li>\u2705 Tag-based Firewall: Only droplets with <code>n8n</code> tag can access databases</li> <li>\u2705 Encrypted Traffic: All VPC traffic is encrypted by default</li> <li>\u2705 Public Access: Only main droplet port 5678 is exposed externally</li> </ul>"},{"location":"architecture/overview/#data-flow","title":"Data Flow","text":"<ol> <li>User Access: Browser \u2192 Main Droplet (port 5678)</li> <li>Workflow Creation: Main Droplet \u2192 PostgreSQL (stores workflow)</li> <li>Execution Trigger: Main Droplet \u2192 Valkey Queue (adds job)</li> <li>Worker Processing: Worker \u2192 Valkey Queue (pulls job) \u2192 Executes \u2192 Reports back</li> <li>Result Storage: Worker \u2192 PostgreSQL (stores execution history)</li> </ol>"},{"location":"architecture/overview/#scaling","title":"Scaling","text":""},{"location":"architecture/overview/#horizontal-scaling","title":"Horizontal Scaling","text":"<p>Add or remove worker droplets based on workload:</p> <pre><code>worker_count = 5  # Scale to 5 workers\n</code></pre>"},{"location":"architecture/overview/#vertical-scaling","title":"Vertical Scaling","text":"<p>Upgrade droplet sizes for more CPU/RAM:</p> <pre><code>worker_size = \"s-2vcpu-4gb\"  # Upgrade workers\nmain_size = \"s-2vcpu-4gb\"    # Upgrade main\n</code></pre> <p>See Infrastructure Details for more information.</p>"},{"location":"configuration/initialization-scripts/","title":"Initialization Scripts","text":"<p>The deployment uses initialization scripts to automatically configure n8n on first boot.</p>"},{"location":"configuration/initialization-scripts/#main-instance-script-main-initsh","title":"Main Instance Script (<code>main-init.sh</code>)","text":"<p>The main droplet automatically runs <code>main-init.sh</code> on first boot, which:</p> <ul> <li>Sets <code>EXECUTIONS_MODE=queue</code> (enables n8n queue mode for horizontal scaling)</li> <li>Creates Docker volume for n8n data persistence</li> <li>Starts n8n container with Docker</li> <li>Connects to PostgreSQL database (for workflows, credentials, execution history)</li> <li>Connects to Valkey/Redis (for queue management)</li> <li>Exposes n8n on port 5678</li> <li>Configures timezone (default: America/New_York)</li> <li>Makes environment variables persistent across reboots</li> </ul>"},{"location":"configuration/initialization-scripts/#queue-mode-configuration","title":"Queue Mode Configuration","text":"<p>The main instance is configured for optimal horizontal scaling:</p> <ul> <li>EXECUTIONS_MODE=queue: Uses queue system for distributing work</li> <li>OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true: Routes manual executions to workers</li> <li>N8N_RUNNERS_ENABLED=true: Enables task runners (JavaScript only by default)</li> <li>N8N_ENCRYPTION_KEY: Shared encryption key (same across all instances)</li> <li>SKIP_MIGRATIONS: Only main runs migrations, workers skip them</li> </ul>"},{"location":"configuration/initialization-scripts/#worker-instance-script-worker-initsh","title":"Worker Instance Script (<code>worker-init.sh</code>)","text":"<p>Each worker droplet automatically runs <code>worker-init.sh</code> on first boot, which:</p> <ul> <li>Sets <code>EXECUTIONS_MODE=queue</code> (connects workers to the queue system)</li> <li>Creates Docker volume for n8n data persistence</li> <li>Starts n8n container with Docker in worker mode</li> <li>Connects to PostgreSQL database (for reading workflow definitions)</li> <li>Connects to Valkey/Redis (for pulling jobs from queue)</li> <li>Configures timezone (default: America/New_York)</li> <li>Makes environment variables persistent across reboots</li> </ul>"},{"location":"configuration/initialization-scripts/#key-differences-from-main-instance","title":"Key Differences from Main Instance","text":"<ul> <li><code>N8N_DISABLE_PRODUCTION_MAIN_PROCESS=true</code> (disables web UI, runs as worker only)</li> <li>No web UI port exposed (workers don't need port 5678)</li> <li>No health check endpoint (workers are headless)</li> <li>Automatically connects to queue and processes jobs</li> </ul>"},{"location":"configuration/initialization-scripts/#customization","title":"Customization","text":"<p>You can customize these scripts or provide your own via the <code>main_user_data</code> and <code>worker_user_data</code> variables in <code>variables.tfvars</code>.</p>"},{"location":"configuration/variables/","title":"Configuration Variables","text":"<p>This page documents all available Terraform variables for customizing your n8n deployment.</p>"},{"location":"configuration/variables/#required-variables","title":"Required Variables","text":""},{"location":"configuration/variables/#do_token","title":"<code>do_token</code>","text":"<ul> <li>Type: <code>string</code></li> <li>Description: DigitalOcean API token</li> <li>Example: <code>\"dop_v1_abc123...\"</code></li> </ul>"},{"location":"configuration/variables/#ssh_keys","title":"<code>ssh_keys</code>","text":"<ul> <li>Type: <code>list(string)</code></li> <li>Description: List of SSH key fingerprints to add to droplets</li> <li>Example: <code>[\"aa:bb:cc:dd:ee:ff:00:11:22:33:44:55:66:77:88:99\"]</code></li> </ul>"},{"location":"configuration/variables/#optional-variables","title":"Optional Variables","text":"<p>See <code>.tfvars.example</code> for a complete list of all available variables and their descriptions.</p>"},{"location":"configuration/variables/#getting-your-ssh-key-fingerprint","title":"Getting Your SSH Key Fingerprint","text":"<pre><code>ssh-keygen -lf ~/.ssh/id_rsa.pub -E md5 | awk '{print $2}' | sed 's/MD5://g'\n</code></pre> <p>Or from DigitalOcean dashboard: https://cloud.digitalocean.com/account/security</p>"},{"location":"deployment/post-deployment/","title":"Post-Deployment","text":"<p>Steps to take after deploying your n8n infrastructure.</p>"},{"location":"deployment/post-deployment/#verify-deployment","title":"Verify Deployment","text":""},{"location":"deployment/post-deployment/#check-all-resources","title":"Check All Resources","text":"<pre><code># Check all resources\nterraform show\n\n# Get connection details\nterraform output\n</code></pre>"},{"location":"deployment/post-deployment/#test-main-instance","title":"Test Main Instance","text":"<pre><code># Get the n8n URL\nterraform output n8n_url\n\n# Or test directly\ncurl http://$(terraform output -raw main_public_ip):5678\n</code></pre>"},{"location":"deployment/post-deployment/#access-n8n","title":"Access n8n","text":"<ol> <li>Open the URL from <code>terraform output n8n_url</code> in your browser</li> <li>Complete the n8n setup wizard</li> <li>Create your first workflow!</li> </ol>"},{"location":"deployment/post-deployment/#verify-initialization","title":"Verify Initialization","text":""},{"location":"deployment/post-deployment/#check-main-instance-logs","title":"Check Main Instance Logs","text":"<pre><code># SSH into main instance\nssh root@$(terraform output -raw main_public_ip)\n\n# View initialization logs\ncat /var/log/n8n-main-init.log\n\n# View n8n container logs\ndocker logs n8n -f\n</code></pre>"},{"location":"deployment/post-deployment/#check-worker-logs","title":"Check Worker Logs","text":"<pre><code># SSH into any worker\nssh root@&lt;worker-ip&gt;\n\n# View initialization logs\ncat /var/log/n8n-worker-init.log\n</code></pre>"},{"location":"deployment/post-deployment/#verify-database-connections","title":"Verify Database Connections","text":"<pre><code># SSH into main instance\nssh root@$(terraform output -raw main_public_ip)\n\n# Check PostgreSQL connection\ndocker exec n8n env | grep DB_POSTGRESDB\n\n# Check Valkey connection\ndocker exec n8n env | grep REDIS\n</code></pre>"},{"location":"deployment/post-deployment/#next-steps","title":"Next Steps","text":"<ol> <li>Configure DNS (if using custom domain)</li> <li>Set up SSL/TLS (if needed)</li> <li>Create workflows in n8n</li> <li>Monitor performance and scale as needed</li> </ol>"},{"location":"deployment/post-deployment/#scaling","title":"Scaling","text":"<p>See the Architecture Overview for scaling instructions.</p>"},{"location":"deployment/post-deployment/#troubleshooting","title":"Troubleshooting","text":"<p>If you encounter issues, see the Troubleshooting Guide.</p>"},{"location":"deployment/terraform/","title":"Terraform Deployment","text":"<p>This page covers the Terraform deployment process in detail.</p>"},{"location":"deployment/terraform/#initialization","title":"Initialization","text":"<pre><code>terraform init\n</code></pre> <p>This downloads the required providers (DigitalOcean, etc.).</p>"},{"location":"deployment/terraform/#planning","title":"Planning","text":"<p>Before applying, always review the plan:</p> <pre><code>terraform plan\n</code></pre> <p>This shows what resources will be created, modified, or destroyed.</p>"},{"location":"deployment/terraform/#applying","title":"Applying","text":"<p>Deploy the infrastructure:</p> <pre><code>terraform apply\n</code></pre> <p>This will: 1. Create the VPC 2. Create PostgreSQL database cluster (~10-15 minutes) 3. Create Valkey database cluster (~10-15 minutes) 4. Create main droplet 5. Create worker droplets 6. Configure networking and firewall rules</p>"},{"location":"deployment/terraform/#outputs","title":"Outputs","text":"<p>After deployment, get connection details:</p> <pre><code># Main droplet\nterraform output main_public_ip\nterraform output main_private_ip\n\n# Workers\nterraform output worker_public_ips\nterraform output worker_private_ips\n\n# PostgreSQL\nterraform output database_host\nterraform output database_port\n\n# Valkey\nterraform output valkey_host\nterraform output valkey_port\n\n# Connection strings (sensitive)\nterraform output database_connection_string\nterraform output valkey_uri\n\n# n8n URL\nterraform output n8n_url\n</code></pre>"},{"location":"deployment/terraform/#state-management","title":"State Management","text":"<p>Terraform stores state in <code>terraform.tfstate</code>. This file contains sensitive information and should be:</p> <ul> <li>\u2705 Kept secure (not committed to public repos)</li> <li>\u2705 Backed up regularly</li> <li>\u2705 Shared with team members securely</li> </ul>"},{"location":"deployment/terraform/#cleanup","title":"Cleanup","text":"<p>To destroy all resources:</p> <pre><code>terraform destroy\n</code></pre> <p>This will remove all created resources. Be careful!</p>"},{"location":"getting-started/prerequisites/","title":"Prerequisites","text":"<p>Before deploying n8n with horizontal scaling on DigitalOcean, ensure you have the following:</p>"},{"location":"getting-started/prerequisites/#required-accounts-services","title":"Required Accounts &amp; Services","text":""},{"location":"getting-started/prerequisites/#1-digitalocean-account","title":"1. DigitalOcean Account","text":"<ul> <li>Sign up at digitalocean.com</li> <li>Add a payment method (required for creating resources)</li> </ul>"},{"location":"getting-started/prerequisites/#2-digitalocean-api-token","title":"2. DigitalOcean API Token","text":"<ol> <li>Go to API Tokens</li> <li>Click \"Generate New Token\"</li> <li>Give it a name (e.g., \"Terraform\")</li> <li>Select \"Write\" scope</li> <li>Copy the token (you'll need it for <code>variables.tfvars</code>)</li> </ol>"},{"location":"getting-started/prerequisites/#3-ssh-key-in-digitalocean","title":"3. SSH Key in DigitalOcean","text":"<ol> <li> <p>If you don't have an SSH key, generate one:    <pre><code>ssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"\n</code></pre></p> </li> <li> <p>Get your SSH key fingerprint:    <pre><code>ssh-keygen -lf ~/.ssh/id_rsa.pub -E md5 | awk '{print $2}' | sed 's/MD5://g'\n</code></pre></p> </li> <li> <p>Add the SSH key to DigitalOcean:</p> </li> <li>Go to SSH Keys</li> <li>Click \"Add SSH Key\"</li> <li>Paste your public key (<code>~/.ssh/id_rsa.pub</code>)</li> <li>Copy the fingerprint shown</li> </ol>"},{"location":"getting-started/prerequisites/#required-software","title":"Required Software","text":""},{"location":"getting-started/prerequisites/#terraform","title":"Terraform","text":"<p>Install Terraform on your local machine:</p> <p>macOS (Homebrew): <pre><code>brew install terraform\n</code></pre></p> <p>Linux: <pre><code># Download from https://www.terraform.io/downloads\n# Or use your package manager\n</code></pre></p> <p>Windows: - Download from terraform.io/downloads - Or use Chocolatey: <code>choco install terraform</code></p> <p>Verify installation: <pre><code>terraform version\n</code></pre></p>"},{"location":"getting-started/prerequisites/#digitalocean-cli-optional-but-recommended","title":"DigitalOcean CLI (Optional but Recommended)","text":"<p>The <code>doctl</code> CLI is useful for managing DigitalOcean resources:</p> <p>macOS (Homebrew): <pre><code>brew install doctl\n</code></pre></p> <p>Linux/Windows: - Download from doctl releases</p> <p>Authenticate: <pre><code>doctl auth init\n</code></pre></p>"},{"location":"getting-started/prerequisites/#system-requirements","title":"System Requirements","text":"<ul> <li>Operating System: macOS, Linux, or Windows</li> <li>RAM: At least 4GB available</li> <li>Internet: Stable connection for downloading Terraform providers and images</li> <li>Disk Space: ~500MB for Terraform and providers</li> </ul>"},{"location":"getting-started/prerequisites/#estimated-costs","title":"Estimated Costs","text":"<p>Before deploying, be aware of the estimated monthly costs:</p> Resource Size Monthly Cost PostgreSQL db-s-1vcpu-1gb $15 Valkey db-s-1vcpu-1gb $15 Main Droplet s-1vcpu-2gb $12 Worker (x3) s-1vcpu-1gb $6 \u00d7 3 = $18 Total ~$60/month <p>These are estimates and may vary based on your region and usage.</p>"},{"location":"getting-started/prerequisites/#next-steps","title":"Next Steps","text":"<p>Once you have all prerequisites ready, proceed to the Quick Start Guide.</p>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":"<p>Get your n8n horizontal scaling deployment up and running in minutes.</p>"},{"location":"getting-started/quick-start/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, ensure you have:</p> <ol> <li>DigitalOcean API token: Create one here</li> <li>SSH key added to DigitalOcean: Add it here</li> <li>Terraform installed: Download here</li> </ol>"},{"location":"getting-started/quick-start/#step-1-configure-variables","title":"Step 1: Configure Variables","text":"<pre><code># Copy example configuration\ncp .tfvars.example variables.tfvars\n\n# Edit variables.tfvars with your settings\nnano variables.tfvars\n</code></pre>"},{"location":"getting-started/quick-start/#step-2-initialize-terraform","title":"Step 2: Initialize Terraform","text":"<pre><code># Initialize Terraform\nterraform init\n</code></pre>"},{"location":"getting-started/quick-start/#step-3-review-the-plan","title":"Step 3: Review the Plan","text":"<pre><code># Review what will be created\nterraform plan\n</code></pre>"},{"location":"getting-started/quick-start/#step-4-deploy","title":"Step 4: Deploy","text":"<pre><code># Deploy the infrastructure\nterraform apply\n</code></pre> <p>This will create: - PostgreSQL database cluster - Valkey (Redis) database cluster - Main droplet (n8n coordinator/web UI) - Worker droplets (scalable n8n workers) - VPC for secure private networking</p>"},{"location":"getting-started/quick-start/#step-5-access-n8n","title":"Step 5: Access n8n","text":"<p>After deployment completes (~10-15 minutes), get your n8n URL:</p> <pre><code>terraform output n8n_url\n</code></pre> <p>Then: 1. Open the URL in your browser 2. Complete the n8n setup wizard 3. Start creating workflows!</p>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Review the Architecture Overview to understand the infrastructure</li> <li>Check Configuration for customization options</li> <li>See Troubleshooting if you encounter issues</li> </ul>"}]}